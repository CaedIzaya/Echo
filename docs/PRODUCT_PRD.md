## 产品需求文档（PRD）—— Echo Focus / 数字静默

### 一、产品定位与目标

#### 1.1 产品一句话

Echo 是一款围绕「专注、心流与自我关系」的陪伴型应用，用心树、Lumi（EchoSpirit 小光球）和温和的数据可视化，帮助用户恢复对自己节奏与成长的感觉，而不是简单提高产出或堆叠 KPI。

#### 1.2 想解决的核心问题

- 用户在高压环境中，已经被各种 KPI、打卡、自律工具包围，但：
  - 主观上仍然觉得「我不行」「我没进步」；
  - 常依赖焦虑和自责推进自己，一段时间后就崩溃或报复性拖延；
  - 对自己的一天、一周没有感觉，只记得失败时刻。
- Echo 想解决的是：
  - **让用户重新感知自己的节奏与长期轨迹**；
  - **提供低压、可信的正向反馈与陪伴**；
  - **把“专注”从 KPI 任务，转回到一种“和自己对齐”的体验**。

#### 1.3 为什么不用传统「效率 / 自律 / KPI」那套

- 传统效率类产品的默认前提是：
  - 人需要被管理和驱赶 → 更多任务清单、更多提醒、更多统计；
  - 情绪是干扰 → 要压制或忽视；
  - 成功标准是：完成了多少任务、积累了多少小时。
- Echo 的前提完全不同：
  - 人本身是有驱动力的，问题在于噪音和内耗；
  - 情绪是一种信号，而不是 bug，需要一个安全的容器；
  - 成功标准是：**用户和自己的关系是否更松弛、更信任、更稳定**。
- 因此 Echo **刻意不做**：
  - 排行榜、好友 PK、「你落后于 90% 用户」等竞争感设计；
  - 大量红点、强提醒、打卡惩罚机制；
  - 纯粹围绕 KPI 的「今日你完成了吗」式文案。

---

### 二、核心心理角色与产品结构

#### 2.1 心树（HeartTree）——「长期自我」

- **心理隐喻**
  - 心树代表的是用户的长期成长年轮，而不是短期任务树；
  - 每一次专注、每一个小目标完成、每一则总结，都会在年轮上留下痕迹。
- **产品职责**
  - 把「看不见的长期累积」变成可视化：等级、成长值、阶段、开花状态等；
  - 对应用户那一部分：**慢热、长期、踏实但不张扬的自我**；
  - 当用户停下很多天，它不会责备，只是停在那里，充当一种「沉默但稳定的存在」。

#### 2.2 Lumi / EchoSpirit 小光球——「前台同伴」

- **心理隐喻**
  - Lumi 是一个会说话的小光球，是用户每次打开 Echo 时首先遇到的“眼神”；
  - 它是前台陪伴者：观察用户的状态和行为，用语言做温和反馈。
- **产品职责**
  - 将心流指数、专注记录、连续天数等抽象数据，翻译成人话：
    - 「你今天其实比自己以为的稳定」；
    - 「你这几天有一种在对齐的感觉」；
    - 「你刚才在对抗一些很重的东西，我看见了」。
  - 在失败/中断时，尽量避免羞辱式语言：
    - 不说「你又没完成」，而是尝试指出努力或内在阻力。
  - 与觉察引擎（`src/awareness`）配合，在合适的节点给出更“懂你”的句子，而非打扰式催促。

#### 2.3 商店（Shop）——「温和的再投资回路」

- **心理隐喻**
  - 商店不是抽卡或氪金点，而是一个「给自己买小礼物」的地方；
  - 用户用自己的时间和努力，换来一点点视觉或情绪上的安慰。
- **产品职责**
  - 把经验、成就等抽象的数值变成可以“摸到”的东西（皮肤、小装饰等）；
  - 不设计强上瘾曲线和重度经济系统，而是轻量的「自我犒劳」；
  - 作为长期使用时的缓冲与调剂，而不是主要动机来源。

#### 2.4 刻意不做的内容（产品边界）

- 不做效率军备竞赛：
  - 不做公开排行榜、他人对比、PK 模式；
  - 不用「你落后了」「你又失败了」这类话术。
- 不做重型任务管理：
  - 不替代专业 ToDo 或项目管理工具；
  - 不做复杂依赖关系、多人协作工作流。
- 不做窥探式“智能”：
  - 不读取其他 App/网站内容，不分析私人文本；
  - 不给用户贴负面标签（如“拖延症患者”）。
- 不做惩罚式机制：
  - 连续打卡中断不会触发强惩罚，只影响部分轻量正反馈；
  - 不通过羞辱、恐吓或高压来驱动使用。

---

### 三、关键用户与使用场景

#### 3.1 目标用户画像

- 年龄约 20–40 岁，有一定自我要求、经常自我怀疑；
- 已经接触过多种效率/自律工具，但对「打卡、KPI、排行榜」产生疲劳甚至逆反；
- 在意心理状态与长期成长，希望对自己的生活有更多掌控感，而不是“被安排”。

#### 3.2 典型使用场景

- **白天：工作/学习时段**
  - 用户打开 Echo，选择计划或自由专注，完成一两次专注；
  - 结束后，看到 Lumi 的反馈与心流指数，心树也同步成长；
  - 当天情绪较满时，Lumi 可以给出“共情+轻建议”的文案。
- **晚上：收尾与回顾**
  - 用户打开 Dashboard，看心树、今日统计与最近成就；
  - 通过日总结/小结功能，给自己一个温和的收束；
  - 有心情时在商店给自己买一点小装饰。
- **中长期：周/月层级**
  - 定期通过周报/历史统计，看过去几周的曲线与关键节点；
  - 感知到：即使某些天“很烂”，总体线条仍在缓慢抬升。

---

### 四、功能模块说明（从「问题 → 设计」角度）

> 本节只列出与产品体验紧密相关的模块，技术细节见 `ARCHITECTURE.md`。

#### 4.1 专注 & 心流

- **用户问题**
  - 不知道「自己今天专注得好不好」；
  - 专注过程中稍有中断就觉得“完了，这次又算失败”；
  - 只看见时长，看不见质量。
- **设计方案**
  - 专注会话记录（`/focus` + `/api/focus-sessions`）：
    - 支持目标时长、自由专注、中断、恢复等；
    - 以时间戳为基础，保证在前后台切换时计时仍然准确。
  - 心流指数（`flowEngine` + Dashboard 展示）：
    - 不只看时长，也看连续性和稳定性；
    - 提供一个综合指标，让用户能说「这段时间我真的进入状态了」。
  - Lumi 文案：
    - 用自然语言解释心流情况（例如“你今天更稳”“你有点分散但还在努力”）；
    - 失败时尽量从理解角度切入，而不是简单扣分。

#### 4.2 计划 / 小目标 / 里程碑

- **用户问题**
  - 目标太大，不知道从哪一步开始；
  - 小任务堆满 ToDo，但缺乏“方向”和“整体感”；
  - 完成一个步骤很容易被忽略或觉得没意义。
- **设计方案**
  - 计划（Projects）+ 里程碑（Milestones）：
    - 用户可以为某个方向创建计划，并拆分为若干里程碑；
    - 每个里程碑可以绑定专注与进度。
  - 小目标/勾选体验：
    - 提供「勾掉一个小块」的即时满足感；
    - 与成就系统和心树经验挂钩，让每个小步都“被记录”。
  - 界面呈现：
    - 在 Dashboard 的主卡片上突出“当前主要计划”和最近里程碑；
    - 避免一次性展示太多计划，减轻选择焦虑。

#### 4.3 日总结与周报

- **用户问题**
  - 每天/每周结束时，只剩下一句“我又白过了一天”的感觉；
  - 很难回忆出具体做过什么，尤其在情绪不佳时；
  - 仅靠数字统计，无法真正“说服自己”。
- **设计方案**
  - 日总结（`/daily-summary` + `/api/daily-summary/today`）：
    - 汇总当天关键专注、里程碑与心树变化；
    - 引导用户简单写下 1–2 句自我描述，而不是长篇日记。
  - 周报与历史（`weeklyReport` + `/api/weekly-report*`）：
    - 用故事化的方式展示一周的专注与成长，而不仅是数字堆叠；
    - 标记关键节点（首次达成、心流高峰、连续天数等）。

#### 4.4 成长可视化（等级 / 心树 / 成就 / 商店）

- **用户问题**
  - 很难对自己的长期成长有直观感受；
  - 常常只盯着最近一次失败，而忘了整体线条；
  - 单纯的「等级」或「成就列表」会让人疲劳。
- **设计方案**
  - 用户等级（`LevelSystem` + `useUserExp`）：
    - 从整体行为层面反映「你在 Echo 的使用深度与持久度」；
    - 不追求极高上限，而是适中、易于常常升级。
  - 心树等级与开花（`HeartTreeExpSystem` + `HeartTreeSystem`）：
    - 更聚焦于与专注、心流相关的行为；
    - 通过树形视觉反映成长阶段。
  - 成就系统（`AchievementSystem` + `AchievementPanel`）：
    - 对关键里程碑进行明确标记（首次达标、连续专注、心树等级等）；
    - 严格依赖数据库，避免重复解锁或错乱。
  - 商店（Shop）：
    - 以轻量视觉奖励为主；
    - 不与真实货币或重课金绑定，避免变味。

---

### 五、非功能性需求

#### 5.1 体验原则

- 任何提示与文案，优先考虑：
  - **安全感 > 刺激感**；
  - **共情 > 评判**；
  - **持续性 > 爆发感**。
- 页面和交互尽量保持安静：
  - 限制全屏弹窗数量和频率；
  - 避免频繁闪烁、震动和强对比动画。

#### 5.2 性能与数据一致性

- 登录后所有关键数据（等级、心树、成就、统计、计划等）：
  - 一律从数据库加载为权威来源；
  - localStorage 仅在 UI 首屏用于回显，不参与“要不要请求”的决策；
  - 换设备、换浏览器时，保证体验一致。

#### 5.3 隐私与安全

- 只存储与专注/计划相关的必要信息；
- 不分析用户的个人文档、聊天记录等隐私内容；
- 密码与账户安全基于 NextAuth + 加密存储实现。

---

### 六、版本规划（高层）

#### V1：单人陪伴版（当前）

- 专注计时 + 计划/里程碑管理；
- 心流指数与基础统计；
- 心树 + 用户等级 + 成就 + 商店；
- Lumi 文案与基础觉察输出；
- 完整的数据库优先架构与数据同步策略。

#### V2：更深层觉察与情绪支持

- 扩展 `awareness` 规则，引入更多维度（比如情绪标记、作息节律）；
- 增强 Lumi 与心树文案的个性化与上下文感知；
- 引入更细腻的「心理安全」提醒与自我对话引导。

#### V3：个性化与长期陪伴

- 允许一定程度的心树外观/Lumi 风格自定义，在不破坏数据连续性的前提下增强代入感；
- 更丰富的周报/年度回顾形式，让用户在长时间跨度中感知自己；
- 探索与专业心理服务或教练工具的轻度整合，保持非医疗、非诊断属性。

---

### 七、成功指标（如何判断产品在变好）

- **行为指标（定量）**
  - D7 / D30 留存；
  - 每周打开 Echo 的日数分布；
  - 每周至少一次完整专注的用户比例；
  - 心树等级、成就解锁等长期指标的自然增长曲线（不过度刷刷刷，也不是停滞不前）。

- **主观与反馈指标（定性）**
  - 访谈和问卷中，用户是否更少使用「我很废」「我完蛋了」这类自我攻击用语；
  - 是否更常出现「我好像有在变好」「我开始能感到自己的节奏」这类表达；
  - 用户在“状态差”的时候，仍然愿意打开 Echo 看看自己的心树或听 Lumi 说几句。

> 本 PRD 与 `docs/ARCHITECTURE.md` 配套使用：  
> - PRD 主要回答「为什么要这样做、要为谁解决什么问题、哪些是刻意不做的」；  
> - ARCHITECTURE 文档则回答「这些理念在工程上是如何分层与落地的」。


