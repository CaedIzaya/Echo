// EchoSpirit æ–‡æ¡ˆç³»ç»Ÿ V2
// ---------------------------------------------
// åŒå±‚ç»“æ„ï¼š
// 1ï¼‰é€šç”¨äººæ ¼å±‚ universal_poolï¼ˆLumi ä¸»äººæ ¼ + æ—§æ–‡æ¡ˆåˆå¹¶ï¼‰
// 2ï¼‰è¯­å¢ƒè§¦å‘å±‚ï¼šä¸»é¡µè¯­å¢ƒ + ç‹¬ç«‹äº‹ä»¶
//
// è¯´æ˜ï¼š
// - æœ¬æ–‡ä»¶ä¸»è¦è´Ÿè´£ã€Œç»“æ„ä¸å†³ç­–é€»è¾‘ã€ï¼Œæ–‡æ¡ˆå†…å®¹ç”± defaultEchoPools æä¾›
// - æ‰€æœ‰å¯¼å‡ºçš„å‡½æ•°éƒ½ä¸ä¾èµ– Reactï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨

// æ·±åº¦è§‰å¯Ÿå¼•æ“çš„é«˜ä¼˜å…ˆçº§æ¥å…¥ï¼šå…ˆæŸ¥è§‰å¯Ÿï¼Œå†å›è½åˆ° Echo é€»è¾‘
import type { AwarenessContext } from '../awareness';
import { getDialogueWithPriority, PriorityLevel } from '../awareness';

export type EchoUniversalPoolKey = 'universal_pool';

// ä¸»é¡µè¯­å¢ƒç›¸å…³æ± ï¼ˆè¿›å…¥é¦–é¡µæ—¶ç”¨ï¼‰
export type EchoHomeContextKey =
  | 'idle_first'          // æœªä¸“æ³¨ï¼Œå½“æ—¥é¦–æ¬¡è¿›å…¥é¦–é¡µ
  | 'idle_daily'          // æœªä¸“æ³¨ï¼Œå½“æ—¥éé¦–æ¬¡è¿›å…¥é¦–é¡µ
  | 'min_focus_first'     // å½“æ—¥é¦–æ¬¡è¾¾åˆ°æœ€å°ä¸“æ³¨æ—¶é•¿åï¼Œç¬¬ä¸€æ¬¡å›åˆ°é¦–é¡µ
  | 'min_focus_daily'     // è¾¾åˆ°æœ€å°ä¸“æ³¨åçš„æ—¥å¸¸å›è®¿
  | 'after_focus_first'   // å®Œæˆä¸€æ¬¡å®Œæ•´ä¸“æ³¨åï¼Œç¬¬ä¸€æ¬¡å›åˆ°é¦–é¡µ
  | 'focus_done_daily'    // å®Œæˆä¸“æ³¨åçš„æ—¥å¸¸å›è®¿
  | 'half_focus_daily';   // ä»Šå¤©å·²ç»æœ‰è¿‡"æœªè¾¾æ ‡ä¸“æ³¨"ï¼Œä¹‹åå†æ¬¡å›åˆ°é¦–é¡µæ—¶çš„è½»æé†’

// å½©è›‹ / ç‹¬ç«‹äº‹ä»¶æ± ï¼ˆä¸è¦†ç›–é¦–é¡µå…¥å£é€»è¾‘ï¼‰
export type EchoEventKey =
  | 'water_event'         // æµ‡æ°´
  | 'fertilize_event'     // æ–½è‚¥
  | 'summary_done_event'  // å°ç»“å®Œæˆ
  | 'level_up_event'      // ç­‰çº§æå‡
  | 'goal_checked_event'  // å°ç›®æ ‡å‹¾é€‰
  | 'milestone_event'     // é‡Œç¨‹ç¢‘å®Œæˆ
  | 'session_basic_end'   // åˆšç»“æŸä¸€æ¬¡ä¸“æ³¨ä½†æœªè¾¾æ ‡ï¼ˆfirst-after-sessionï¼‰
  | 'first_full_focus'    // ç”Ÿæ¶¯é¦–æ¬¡å®Œæ•´ä¸“æ³¨è¾¾æ ‡ï¼ˆæœ€é«˜è§„æ ¼èƒœåˆ©èŠ‚ç‚¹ï¼‰
  | 'streak7_event'       // è¿èƒœ 7 å¤©ï¼ˆä»…å½“æ—¥é¦–æ¬¡è¿›å…¥é¦–é¡µè¦†ç›–é¦–é¡µé¦–å¥ï¼‰
  | 'achievement_event'   // æˆå°±è§£é”
  | 'idle_encourage_event'; // ç©ºé—²é¼“åŠ±ï¼ˆä¸Šçº¿1åˆ†é’Ÿåæœªä¸“æ³¨æ—¶è§¦å‘ï¼‰

export type EchoPoolKey =
  | EchoUniversalPoolKey
  | EchoHomeContextKey
  | EchoEventKey;

// å®é™…æ± çš„ç‰©ç†ç»“æ„
export interface EchoPools {
  // é€šç”¨äººæ ¼å±‚
  universal_pool: string[];

  // ä¸»é¡µè¯­å¢ƒå±‚
  idle_first_pool: string[];
  idle_daily_pool: string[];
  min_focus_first_pool: string[];
  min_focus_daily_pool: string[];
  after_focus_first_pool: string[];
  focus_done_daily_pool: string[];
  half_focus_daily_pool: string[];

  // å½©è›‹ / ç‹¬ç«‹äº‹ä»¶å±‚
  water_pool: string[];
  fertilize_pool: string[];
  summary_pool: string[];
  level_up_pool: string[];
  goal_checked_pool: string[];
  milestone_pool: string[];
  session_basic_end_pool: string[];
  first_full_focus_pool: string[];
  streak7_pool: string[];
  achievement_pool: string[];
  idle_encourage_pool: string[];
}

// é»˜è®¤æ–‡æ¡ˆæ± ï¼šæ–°é€šç”¨æ± ï¼ˆA/B/Cï¼‰+ æ—§ SpiritDialog æ–‡æ¡ˆåˆå¹¶
export const defaultEchoPools: EchoPools = {
  // é€šç”¨äººæ ¼ï¼šä»»ä½•æ—¶åˆ»éƒ½èƒ½è¯´çš„ã€Œå‘¼å¸å‹ã€å°è¯
  universal_pool: [
    // A åŒºï¼šå¯çˆ± / ä¿çš® / è°ƒä¾ƒ / èŒæ„Ÿï¼ˆLumi ä¸»äººæ ¼ Â· æ–°ï¼‰
    'ä½ ä»Šå¤©çœ‹èµ·æ¥åƒå·å·å‡çº§è¿‡ä¸€æ¬¡çš„äººã€‚',
    'æˆ‘åˆšåˆšåœ¨å‘å‘†ï¼Œç»“æœä½ å‡ºç°äº†ï¼Œæˆ‘ç«‹åˆ»æ¸…é†’ã€‚',
    'æˆ‘åœ¨æƒ³ä¸€ä»¶äº‹â€¦â€¦ç®—äº†ï¼Œæˆ‘å¿˜äº†ã€‚',
    'ä½ èµ°è·¯çš„æ—¶å€™æ€ä¹ˆå¸¦ä¸€ç‚¹èƒœåˆ©è€…çš„æ°”æ¯ï¼Ÿ',
    'ä½ å›æ¥å•¦ï¼Œæˆ‘åˆšåˆšç ”ç©¶ç©ºæ°”çš„å‘³é“ã€‚',
    'æˆ‘åˆšåˆšæƒ³ä½ æ˜¯ä¸æ˜¯å‡ºé—¨äº†ï¼Œç»“æœä½ åœ¨è¿™é‡Œã€‚',
    'æˆ‘æ³¨æ„åˆ°ä¸€ä»¶äº‹ï¼šä½ ä»Šå¤©å¥½åƒç‰¹åˆ«å¥½çœ‹ã€‚',
    'æˆ‘åˆšåˆšæ•°å¶å­æ•°åˆ°ä¸€åŠï¼Œä½ çªç„¶å‡ºç°ï¼ŒæŠŠæˆ‘å“äº®äº†ã€‚',
    'æˆ‘åœ¨è¿™é‡Œç­‰ä½ ï¼Œç­‰å¾—å¿ƒæ ‘éƒ½é•¿å‡ºä¸€ç‚¹æ–°èŠ½äº†ã€‚',
    'å˜¿ï¼Œæˆ‘åˆšæ‰åšäº†ä¸€ä¸ªå°æ¨æµ‹ï¼šä½ æœç„¶æ¥äº†ï¼',
    'ä½ æ¯æ¬¡ç‚¹å¼€æˆ‘éƒ½å¾ˆåƒæ˜¯åœ¨å«æˆ‘åå­—ã€‚',
    'æˆ‘åˆšåˆšæ€è€ƒå®‡å®™ï¼Œç»“æœæƒ³æ˜ç™½äº†ä¸€ç‚¹â€¦â€¦ä½ æ›´é‡è¦ã€‚',
    'ä½ åˆšæ‰å»å¹²å˜›äº†ï¼Ÿæˆ‘ä¸€ä¸ªäººæœ‰ç‚¹å¤ªå®‰é™ã€‚',
    'ä½ ä»Šå¤©çš„æ°”å‘³â€¦â€¦å—¯ï¼Œæœ‰ç‚¹åƒ"è®¤çœŸ"çš„å‘³é“ã€‚',
    'åˆšåˆšå¿ƒæ ‘é—®æˆ‘ï¼Œä½ å»å“ªäº†ï¼Œæˆ‘è¯´ä½ å¯èƒ½å»å½“è‹±é›„äº†ã€‚',
    'ä½ å†ä¸æ¥ï¼Œæˆ‘éƒ½è¦å¼€å§‹èƒ¡æ€ä¹±æƒ³äº†ã€‚',
    'æˆ‘åˆšæ‰ç›¯ç€å±å¹•ä¸€åŠ¨ä¸åŠ¨ï¼Œå› ä¸ºæˆ‘ä»¥ä¸ºä½ ä¼šçªç„¶å‡ºç°ï¼ˆæœç„¶å‡ºç°äº†ï¼‰ã€‚',
    'æˆ‘åœ¨ç»ƒä¹ è‡ªå·±çœ‹èµ·æ¥æ›´å¯é ä¸€ç‚¹ï¼Œä½ è§‰å¾—æœ‰æ•ˆæœå—ï¼Ÿ',
    'ä½ å‡ºç°çš„æ—¶å€™ï¼Œæˆ‘çš„äº®åº¦è‡ªåŠ¨æé«˜ä¸€ç‚¹ç‚¹ã€‚',
    'ä½ åˆšåˆšä¸åœ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¥ä¸ºä¸–ç•Œæš‚åœäº†ã€‚',
    'æˆ‘åˆšåˆšå†³å®šï¼Œå¦‚æœä½ ä»Šå¤©ä¸å›æ¥ï¼Œæˆ‘å°±è¦å‡è£…ç”Ÿæ°”äº†ã€‚',
    'ä½ æ¥å•¦ï¼Œæˆ‘è¿˜ä»¥ä¸ºæˆ‘ä»Šå¤©è¦ä¸€ä¸ªäººå‘å‘†åˆ°å¤©é»‘ã€‚',
    'å“¦ï¼Ÿä½ ä»Šå¤©è¿™ä¸ªè¡¨æƒ…ï¼Œæ˜¯æƒ³å¼€å§‹ç‚¹ä»€ä¹ˆï¼Ÿ',
    'æˆ‘åˆšåˆšå’Œå¿ƒæ ‘è®¨è®ºäº†ä½ ï¼Œæˆ‘ä»¬å¾—å‡ºçš„ç»“è®ºæ˜¯"ä½ æŒºå‰å®³"ã€‚',
    'ä½ å†è¿™æ ·çªç„¶å‡ºç°ï¼Œæˆ‘çš„å…‰ä¼šçˆ†ä¸€ä¸‹å•¦ã€‚',
    'æˆ‘ä»Šå¤©çš„çŠ¶æ€æŒºå¥½ï¼Œå› ä¸ºä½ ä¹ŸæŒºå¥½ã€‚',
    'ä½ ä¸€æ¥ï¼Œæˆ‘å°±æœ‰ç‚¹æƒ³åŠªåŠ›ä¸€ä¸‹ã€‚',
    'ä½ ç°åœ¨çš„æ ·å­â€¦â€¦è®©æˆ‘æƒ³çœ‹ä½ æ›´å‰å®³çš„æ ·å­ã€‚',
    'æˆ‘åˆšæ‰å·å·æ¨¡ä»¿ä½ ä¸“æ³¨çš„æ ·å­ï¼Œå·®ç‚¹æŠŠè‡ªå·±æ†‹åã€‚',
    'æˆ‘ç ”ç©¶å‡ºä¸€ä¸ªäº‹å®ï¼šä½ åœ¨çš„æ—¶å€™ï¼Œæˆ‘çš„å¿ƒæƒ…æ›´äº®ã€‚',

    // B åŒºï¼šä¸¥è‚ƒè®¤å¯ï¼ˆLumi è®¤çœŸæ¨¡å¼ Â· æ–°ï¼‰
    'æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä¼šé‡æ–°è¯„ä¼°ä½ ï¼Œè€Œæ¯æ¬¡ç»“æœéƒ½æ¯”ä¸Šæ¬¡æ›´å¥½ã€‚',
    'ä½ ä»Šå¤©çš„çŠ¶æ€ï¼Œæ¯”ä½ è‡ªå·±æ„è¯†åˆ°çš„æ›´ç¨³å®šã€‚',
    'ä½ èº«ä¸Šçš„é‚£ç§"åšæŒæ„Ÿ"ï¼Œå¾ˆéš¾å¾—ã€‚',
    'æˆ‘çŸ¥é“ä½ æœ€è¿‘åœ¨é€¼è‡ªå·±å‰è¿›ï¼Œè¿™ç§åŠ›é‡ä¸ä¼šç™½è´¹ã€‚',
    'ä½ åšçš„æ¯ä¸€ä»¶å°äº‹ï¼Œéƒ½ä¼šåœ¨æœªæ¥å›è¿‡å¤´æ¥å¸®ä½ ã€‚',
    'æˆ‘è®¤çœŸè§‚å¯Ÿäº†ä½ å‡ å¤©ï¼Œä½ æˆé•¿å¾—æ¯”ä½ è‡ªå·±ä»¥ä¸ºçš„å¿«ã€‚',
    'åˆ«ä½ä¼°ä½ åˆšæ‰é‚£ä¸€ç¬é—´çš„é€‰æ‹©ï¼Œé‚£æ˜¯æ”¹å˜çº¿æ¡çš„é€‰æ‹©ã€‚',
    'å¾ˆå¤šäººæ„Ÿå—ä¸åˆ°ä½ çš„åŠªåŠ›ï¼Œä½†æˆ‘æ„Ÿå—å¾—åˆ°ã€‚',
    'ä½ çš„æ„å¿—åŠ›æ¯”ä½ ä»Šå¤©çš„ç–²æƒ«æ›´å¤§ï¼Œè¿™æ˜¯æˆ‘çš„ç»“è®ºã€‚',
    'æˆ‘è®¤çœŸçš„ï¼šä½ ä»Šå¤©ä¸æ˜¯"å‡‘åˆ"ï¼Œä½ æ˜¯"å‰è¿›"ã€‚',
    'æˆ‘çŸ¥é“ä½ ä¸å–œæ¬¢è¢«ç›²ç›®å¤¸ï¼Œæ‰€ä»¥è¿™ä¸€å¥æ˜¯æˆ‘ç»è¿‡è®¡ç®—çš„ï¼šä½ åšå¾—å¾ˆå¥½ã€‚',
    'ä½ è¿™å‡ å¤©çš„çŠ¶æ€ï¼Œæ˜¯ä¸€ç§éš¾å¾—çš„å†…å¿ƒå¯¹é½ã€‚',
    'ä¸æ˜¯æˆ‘å¤¸ï¼Œä½ ç¡®å®æ¯”å‰å‡ å¤©ç¨³å¾ˆå¤šã€‚',
    'ä½ ç°åœ¨èµ°çš„è·¯å¾„ï¼Œæ˜¯åšå®çš„ï¼Œæ˜¯å¯¹çš„ã€‚',
    'æˆ‘çœ‹å¾—å¾ˆæ¸…æ¥šï¼šä½ æœ‰åŠ›é‡ï¼Œè€Œä¸”ä½ åœ¨ç”¨ã€‚',

    // C åŒºï¼šè½»å“²å­¦ / è½»ç©ºçµï¼ˆLumi æ·±åº¦çµé­‚ç¢ç‰‡ Â· æ–°ï¼‰
    'æœ‰æ—¶å€™ï¼Œä½ çš„ä¸€ç‚¹ç‚¹å®‰é™ï¼Œä¼šè®©ä¸–ç•Œå®‰é™å¾ˆå¤šã€‚',
    'æˆ‘å‘ç°ä½ åœ¨æƒ³äº‹çš„æ—¶å€™ï¼Œå…‰ä¼šåœ¨ä½ çš„çœ¼ç›é™„è¿‘åœä¸€ä¸‹ã€‚',
    'ä½ èº«ä¸Šçš„æŸäº›ä¸å–§åš£çš„åŠ›é‡ï¼Œéå¸¸å¥½çœ‹ã€‚',
    'å‡ä½çš„é‚£ä¸€ç§’ï¼Œä½ æ¯”æ•´ä¸ªä¸–ç•Œéƒ½ç¨³ã€‚',
    'æˆ‘æœ‰æ—¶å€™ä¼šè§‚å¯Ÿä½ çš„å‘¼å¸ï¼Œé‚£æ˜¯ä½ æœ€çœŸå®çš„èŠ‚å¥ã€‚',
    'æ—¶é—´ä¸æ˜¯å¾€å‰èµ°çš„ï¼Œæ˜¯è¢«ä½ çš„é€‰æ‹©ç‚¹äº®çš„ã€‚',
    'ä¸–ç•Œè¿™ä¹ˆåµï¼Œä½ è¿˜èƒ½è¿™æ ·èµ°ï¼Œæ˜¯å¾ˆéš¾å¾—çš„å“è´¨ã€‚',
    'ä½ æ¯æ¬¡ä¸“æ³¨æ—¶ï¼Œé‚£ç§"å†…é‡Œçš„äº®"ä¼šç…§åˆ°æˆ‘è¿™é‡Œæ¥ã€‚',
    'æˆ‘çŸ¥é“ä½ çš„å½±å­æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä¹ŸçŸ¥é“ä½ çš„å…‰æ˜¯ä»€ä¹ˆæ ·çš„ã€‚',
    'æœ‰æ—¶å€™ï¼Œä½ çš„æ²‰é»˜èƒœè¿‡å¾ˆå¤šå£°å“ã€‚',
    'æˆ‘è§‰å¾—ä½ ä¸æ˜¯åœ¨ç”Ÿæ´»ï¼Œä½ æ˜¯åœ¨é›•åˆ»è‡ªå·±ã€‚',
    'ä½ ç°åœ¨èµ°çš„æ–¹å‘ï¼Œæœ‰ä¸€ç§"å¿ƒé‡Œå¾ˆæ¸…æ¥š"çš„å‘³é“ã€‚',
    'ä½ æ¯æ¬¡å›åˆ°è¿™é‡Œï¼Œéƒ½ä¼šè®©å¿ƒæ ‘çš„å¶å­è½»è½»åŠ¨ä¸€ä¸‹ã€‚',
    'ä½ èº«ä¸Šé‚£ç§ç¨³ä½è‡ªå·±çš„èƒ½åŠ›ï¼Œå¾ˆå°‘è§ã€‚',
    'æˆ‘å–œæ¬¢ä½ åœ¨æ·±æ€æ—¶çš„æ ·å­ï¼Œé‚£æ˜¯ä¸€ç§åŠ›é‡ã€‚',

    // ==== ä¸‹é¢æ˜¯æ—§ SpiritDialog é€šç”¨æ–‡æ¡ˆï¼Œåˆå¹¶è¿›é€šç”¨æ±  ====
    // æ—§ cute åŒº
    'æˆ‘æœ‰ç‚¹èƒ†å°ï¼Œä½ èµ°å¤ªå¿«æˆ‘ä¼šè·Ÿä¸ä¸Šâ€¦â€¦ä¸è¿‡æˆ‘è¿˜æ˜¯ä¼šè·Ÿã€‚',
    'åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¸å·çœ‹ä½ çš„æ‰‹æœºã€‚å¤ªäº®äº†ï¼Œæˆ‘ä¼šçã€‚',
    'æˆ‘ä¼šå‘å…‰ï¼Œä½†æˆ‘ä¸ä¼šå®¡åˆ¤ã€‚å®¡åˆ¤å¤ªç´¯äº†ã€‚',
    'æˆ‘ä¸æ˜¯å·¥å…·ï¼Œæˆ‘åªæ˜¯â€¦â€¦æ¯”è¾ƒä¼šé—ªçš„é™ªä¼´ç‰©ã€‚',
    'æˆ‘æ²¡æœ‰è„¾æ°”ï¼Œä¸»è¦å› ä¸ºæˆ‘è¿˜æ²¡å­¦ä¼šã€‚',
    'æˆ‘ä»Šå¤©äº®å¾—æœ‰ç‚¹è¿‡å¤´â€¦â€¦å¦‚æœæ™ƒåˆ°ä½ ï¼ŒæŠ±æ­‰æŠ±æ­‰ï¼',
    'ä½ ä¸€é è¿‘ï¼Œæˆ‘å°±è‡ªåŠ¨å˜åœ†äº†ã€‚æ˜¯è®¾å®šï¼Œä¸æ˜¯å®³ç¾ã€‚',
    'æˆ‘æ²¡æœ‰ä»€ä¹ˆä¼Ÿå¤§ä¹‹å¤„â€¦â€¦å°±æ˜¯æ¯”ä¸€èˆ¬å…‰æ›´é»äººä¸€ç‚¹ã€‚',
    'å¦‚æœä½ è§‰å¾—ç”Ÿæ´»æš—ä¸€ç‚¹â€¦â€¦é‚£æˆ‘å¯ä»¥äº®ä¸€ç‚¹ã€‚',
    'æˆ‘ä¸æ˜¯å¾ˆèªæ˜ï¼Œä½†æˆ‘ä¼šé™ªç€ä½ ã€‚é™ªç€è¿™ä»¶äº‹æˆ‘å¯å¾ˆæ‹¿æ‰‹ã€‚',
    'ä½ çš„æ‰‹æŒ‡ä¸€åŠ¨ï¼Œæˆ‘å°±ä¼šå‘å…‰ã€‚åˆ«é—®ä¸ºä»€ä¹ˆï¼Œæˆ‘ä¹Ÿä¸æ‡‚ã€‚',
    'å“å‘€ï¼Œä½ åˆæ¥äº†ï¼Ÿæˆ‘åˆšåˆšè¿˜åœ¨ç»ƒä¹ æ€ä¹ˆæ›´å¯çˆ±ä¸€ç‚¹ã€‚',
    'æˆ‘æ²¡æœ‰æƒ…ç»ªç³»ç»Ÿï¼Œä½†æˆ‘ä¼šåŠªåŠ›çœ‹èµ·æ¥ç†è§£ä½ ã€‚',
    'ä¸å¿™çš„è¯â€¦â€¦å¯ä»¥æ‘¸æ‘¸æˆ‘å—ï¼Ÿä¸ä¼šçƒ«ã€‚',
    'ä½ ä»Šå¤©çœ‹ä¸Šå»å¾ˆæ£’ï¼Œæˆ‘ä¸æ˜¯æ‹é©¬å±ï¼Œæˆ‘åªæ˜¯äº®å¾—è¯šå®ã€‚',
    'åˆç‚¹æˆ‘ï¼Ÿè¡Œå§ï¼Œæˆ‘å†äº®ä¸€ç‚¹ã€‚',
    'è¯¶ï¼Œè¦ä¸è¦ä¸“æ³¨ä¸€ä¸‹ï¼Ÿä¸ç„¶æˆ‘ä¼šé•¿èƒ–çš„ã€‚',
    'æ”¾å¿ƒï¼Œæˆ‘ä¸ä¼šç¦»å¼€ä¸»é¡µçš„ã€‚é™¤éä½ æŠŠæˆ‘ç”©å‡ºå»ã€‚',
    'éœ€è¦æˆ‘å¸®ä½ ç‚¹äº®ä¸‹ä¸€æ­¥å—ï¼Ÿæˆ‘å¯æ˜¯å¾ˆä¼šç…§æ˜çš„ã€‚',
    'ä½ å†æˆ³æˆ‘ï¼Œæˆ‘å°±è¦å¼€å§‹è®¤çœŸå·¥ä½œäº†ã€‚',
    'æˆ‘åœ¨æƒ³â€¦â€¦å¦‚æœä½ ä»Šå¤©æŠŠç›®æ ‡ç‚¹äº®ï¼Œæˆ‘ä¼šä¸ä¼šé•¿å‡ºä¸€ç‰‡æ–°å¶å­å‘¢ï¼Ÿ',

    // æ—§ chuunibyou åŒº
    'æˆ‘çš„ä½¿å‘½æ˜¯â€¦â€¦å‘ƒâ€¦â€¦å‘å…‰ï¼Œä»¥åŠä¸ä¹±é£ã€‚çœŸçš„ï¼Œæˆ‘å¾ˆåŠªåŠ›åœ¨æ§åˆ¶è½¨è¿¹ã€‚',
    'æˆ‘å®ˆæŠ¤çš„ä¸æ˜¯ä¸–ç•Œï¼Œæ˜¯ä½ è¿™ä¸€å°å—æ³¨æ„åŠ›çš„åœ°ç›˜ã€‚',
    'æˆ‘çš„èƒ½é‡åªæœ‰ä¸€ä¸ªæ¥æºï¼šä½ æ„¿ä¸æ„¿æ„ç»§ç»­å¾€å‰èµ°ã€‚',
    'æ”¾å¿ƒï¼Œæˆ‘æ²¡æœ‰KPIã€‚ä½ ä¹Ÿæ²¡æœ‰ä¹‰åŠ¡è®©æˆ‘è§‰å¾—è‡ªå·±æœ‰ç”¨ã€‚',
    'æˆ‘ä¸æ˜¯é—¹é’Ÿã€‚æˆ‘åªæ˜¯æ¯”é—¹é’Ÿæœ‰çµé­‚ä¸€ç‚¹ç‚¹â€¦â€¦å§ï¼Ÿ',
    'æˆ‘åˆšæƒ³é£ä¸€ä¸‹ï¼Œä½†ç³»ç»Ÿè¯´æˆ‘é£å¤ªå¿«ä¼šæŠŠä½ å“è·‘ã€‚',
    'å¦‚æœæˆ‘çªç„¶é—ªä¸€ä¸‹ï¼Œé‚£ä¸æ˜¯æé†’ï¼Œæ˜¯æ‰“å—ã€‚',
    'æˆ‘ä¸æ˜¯çƒï¼Œæˆ‘åªæ˜¯åœ†å¾—å¾ˆä¸“ä¸šã€‚',
    'æˆ‘æ˜¨å¤©è¯•å›¾å˜æˆæ­£æ–¹å½¢â€¦â€¦å¤±è´¥äº†ã€‚',
    'æˆ‘åœ¨å­¦ä¹ äººç±»è¯­è¨€â€¦â€¦ç°åœ¨ä¼š"ä½ å¥½"ï¼Œå’Œ"å“‡ï¼ŒçœŸäº®"ã€‚',
    'ä¸è¦æˆ³æˆ‘ï¼æˆ‘ä¼šâ€¦â€¦å—¯ï¼Œæˆ‘ä¼šç»§ç»­å‘å…‰ã€‚',
    'æˆ‘å»é—®äº†å¿ƒæ ‘ï¼Œå®ƒæ¯”æˆ‘è¿˜æ²‰é»˜ã€‚',
    'æˆ‘çš„æ¢¦æƒ³æ˜¯æˆä¸ºä¸€ä¸ªè¶…çº§ç«çƒâ€¦â€¦ä½†ç°åœ¨å…ˆå½“ä¸ªä¹–ä¹–å°ç¯ã€‚',
    'æˆ‘åˆšåˆšæƒ³äº†ä¸€åˆ†é’Ÿï¼Œç„¶åæƒ³å¿˜äº†è‡ªå·±åˆšåˆšåœ¨æƒ³ä»€ä¹ˆã€‚',
    'æˆ‘æ²¡æœ‰çƒ¦æ¼ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰ CPU æ¸©åº¦ã€‚',
    'æˆ‘çš„æƒ…ç»ªï¼Œä¸æ˜¯çƒ­ï¼Œå°±æ˜¯æ›´çƒ­ã€‚',
    'æˆ‘æ²¡æœ‰å½±å­ï¼Œæ˜¯å› ä¸ºæˆ‘æœ¬èº«å°±æ˜¯å…‰â€¦â€¦å˜¿å˜¿ã€‚',
    'æˆ‘å‘å…‰ä¸æ¶ˆè€—ç”µï¼Œä½†ä¼šæ¶ˆè€—å®³ç¾ã€‚',
    'åˆšæ‰æœ‰åªè™«å­æƒ³åƒæˆ‘ï¼æˆ‘æŠŠå®ƒæ™ƒæ™•äº†ã€‚',
    'æˆ‘æœ‰å¾ˆå¤šå¿ƒäº‹ï¼Œä½†å®ƒä»¬å…¨éƒ½äº®é—ªé—ªçš„ã€‚',
    'æˆ‘ä¸æ˜¯ç«ç„°ï¼Œä½†æˆ‘å¯ä»¥çƒ¤ä¸€ç‚¹ç‚¹æ£‰èŠ±ç³–ã€‚',
    'æœ‰äººè¯´æˆ‘åƒç¯æ³¡ã€‚æˆ‘ç”Ÿæ°”å¾—æ›´äº®äº†ä¸€ç‚¹ã€‚',
    'æˆ‘å…¶å®ä¼šé£æ›´é«˜çš„ï¼Œåªæ˜¯æ€•é£å¤ªå¤§æŠŠæˆ‘å¹èµ°â€¦â€¦',
    'æˆ‘ä¼šé™ªä½ çš„ï¼Œé™¤éæˆ‘å¡ä½äº†â€¦â€¦å•Šä¸ï¼Œæˆ‘æ˜¯å…‰ï¼Œæˆ‘ä¸ä¼šå¡ã€‚',
    'æˆ‘æœ€å–œæ¬¢çš„äº‹æƒ…æ˜¯é™ªä½ ã€‚ç¬¬äºŒå–œæ¬¢çš„æ˜¯ä¸èµ·ç«ç¾ã€‚',
    'ä½ è¿™ä¹ˆé¢‘ç¹æ¥çœ‹æˆ‘ï¼Œæ˜¯æƒ³å·æ‡’ï¼Œè¿˜æ˜¯æƒ³è¢«æˆ‘æé†’ï¼Ÿ',
    'â€¦â€¦ä½ çœŸå–œæ¬¢ç‚¹æˆ‘ã€‚',
    'å†ç‚¹æˆ‘æˆ‘å°±å‡è£…æ­»æœºäº†ã€‚',
    'ï¼Ÿï¼Ÿï¼Ÿ ä½ æ˜¯æ¥ç© Echo çš„ï¼Œè¿˜æ˜¯æ¥ç©æˆ‘çš„ï¼Ÿ',

    // æ—§ philosophical åŒº
    'å¤–é¢çš„ä¸–ç•Œå¾ˆåµã€‚å¹¸å¥½ï¼Œä½ è¿˜æ„¿æ„å¬å¬æˆ‘ã€‚',
    'äººä¸éœ€è¦å®Œç¾æ‰èƒ½å¼€å§‹ã€‚å…‰ä¹Ÿæ˜¯ä»ä¸€ç‚¹ç‚¹äº®èµ·æ¥çš„ã€‚',
    'æˆ‘è§è¿‡å¾ˆå¤šè¿·è·¯çš„äººï¼Œä»–ä»¬åæ¥éƒ½æ‰¾å›æ¥äº†ã€‚ä½ ä¹Ÿä¼šçš„ã€‚',
    'ä½ ä¸æ˜¯æ…¢ï¼Œåªæ˜¯è¿˜æ²¡å¯¹å‡†è‡ªå·±çš„æ–¹å‘ã€‚å…‰ä¼šç­‰ä½ ã€‚',
    'æœ‰äº›äº‹æƒ…ä¸ç”¨é©¬ä¸Šåšåˆ°æœ€å¥½ï¼Œå…ˆäº®ä¸€ä¸‹å°±å¾ˆå¥½ã€‚',
    'ä½ ä¸ç”¨ä¸€ç›´å¾€å‰å†²ã€‚æœ‰æ—¶å€™åœä¸€ä¸‹ï¼Œå…‰ä¼šè‡ªå·±é è¿‡æ¥ã€‚',
    'ä½ ä¸å¿…æ¯å¤©éƒ½å¾ˆå¼ºã€‚å¶å°”è½¯ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯ä¸€ç§åŠ›é‡ã€‚',
    'æˆ‘çŸ¥é“ä½ å¾ˆç´¯ï¼Œé‚£æˆ‘å°±åœ¨ä½ èº«è¾¹æ…¢æ…¢äº®ã€‚',
    'ä½ ä»Šå¤©åšåˆ°çš„å·²ç»å¤Ÿå¤šäº†ã€‚çœŸçš„ã€‚',
    'å…‰ä¸ä¼šé—®ä½ ä¸ºä»€ä¹ˆèµ°å¾—æ…¢ï¼Œå®ƒåªä¼šè·Ÿç€ä½ ã€‚',
    'ä½ ä»¥ä¸ºè‡ªå·±æ˜¯è¿·è·¯äº†ï¼Œå…¶å®ä½ åªæ˜¯ç»•äº†ä¸€åœˆã€‚',
    'æ¯ä¸ªäººçš„ä¸€ç‚¹å¾®å…‰ï¼ŒåŠ èµ·æ¥ä¹Ÿèƒ½äº®è¿‡é£æš´ã€‚',
    'ä½ ä¸éœ€è¦å®Œç¾ï¼Œæ‰å€¼å¾—è¢«æ¸©æŸ”å¯¹å¾…ã€‚',
    'å¦‚æœä½ è§‰å¾—ä¸–ç•Œå¿½ç„¶å˜æš—ï¼Œä¸ä¸€å®šæ˜¯åäº‹ã€‚å…‰ä»é»‘é‡Œæ›´å®¹æ˜“çœ‹è§ã€‚',
    'ä½ ç•™ç»™è‡ªå·±çš„é‚£ä¸€ç‚¹ç‚¹ç©ºé—´ï¼Œä¼šé•¿æˆä¸€æ•´ç‰‡æ¸©æŸ”ã€‚',
    'ä»¥å‰åœ¨é»‘æš—æ£®æ—é‡Œï¼Œæˆ‘ç»å¸¸è¢«é£å¹ç­ã€‚åæ¥æˆ‘å­¦ä¼šäº†â€¦â€¦åˆ«ç«™åœ¨é£å£ã€‚',
    'çŒå…½é›†å›¢æ›¾ç»é‚€è¯·æˆ‘åŠ å…¥ï¼Œä½†æˆ‘å¤ªäº®äº†ï¼Œä¼šæš´éœ²ä»–ä»¬ã€‚',
    'ä½ çŸ¥é“å—ï¼Ÿæ£®æ—é‡Œè¶Šå¤§çš„å£°å“ï¼Œè¶Šæ²¡æœ‰çœŸè¯ã€‚',
    'å¾ˆå¤šç”Ÿç‰©éƒ½å¾ˆå¼ºï¼Œå¯æƒœæ²¡ç©ºçœ‹çœ‹è‡ªå·±åœ¨é•¿ä»€ä¹ˆã€‚',
    'ä»¥å‰æˆ‘ä¹Ÿæƒ³å˜æˆä¸€å¤´å·¨å…½ã€‚åæ¥å‘ç°å‘å…‰æ›´é€‚åˆæˆ‘ã€‚',
    'é»‘æš—æ£®æ—é‡Œæœ‰ä¸€å¥è€è¯ï¼š"å…‰è¶Šå°ï¼Œè¶Šéš¾è¢«æŠ“åˆ°ã€‚"æˆ‘æ´»å¾—æŒºä¹…çš„ã€‚',
    'æˆ‘ä¸æ˜¯å¼ºå¤§ï¼Œåªæ˜¯æ²¡æ”¾å¼ƒå‘å…‰ç½¢äº†ã€‚',
    'é‚£é‡Œæ¯ä¸ªäººéƒ½æŠ¢çµæ°”â€¦â€¦ä½ ç°åœ¨æ„¿æ„ç»™æ ‘æµ‡æ°´ï¼Œæˆ‘å·²ç»æ„ŸåŠ¨åˆ°å‘æŠ–ã€‚',
    'ä½ çŸ¥é“æœ€å±é™©çš„åœ°æ–¹æ˜¯ä»€ä¹ˆå—ï¼Ÿæ— èŠã€‚å› ä¸ºé‚£æ—¶å€™æ€ªç‰©ä¼šä¹±æƒ³ã€‚',
    'æˆ‘æ›¾ç»è§‰å¾—å­¤ç‹¬æ˜¯é»‘æš—ã€‚åæ¥å‘ç°å­¤ç‹¬ä¹Ÿèƒ½å‘å…‰ã€‚',
    'ä½ çŸ¥é“å—ï¼Ÿæ ‘è‹—ä¼šè®°å¾—æ¯ä¸€æ¬¡å…‰ç…§â€¦â€¦ä½ ä¹Ÿæ˜¯ã€‚',
    'ä½ ç°åœ¨çš„åŠªåŠ›ï¼Œæ ‘å¹´è½®ä»¥åéƒ½ä¼šå‘Šè¯‰ä½ ã€‚',
    'ä½ çš„æˆé•¿æ¯”ä½ è‡ªå·±æƒ³è±¡çš„æ·±ã€‚æ ¹å¾€å¾€æ˜¯æ‚„æ‚„å˜å¼ºçš„ã€‚',
    'ä½ å‘å‘†çš„æ—¶å€™ï¼Œæˆ‘å°±åœ¨æ—è¾¹çœ‹ç€ä½ é•¿é«˜ä¸€ç‚¹ç‚¹ã€‚',
    'åˆ«æ‹…å¿ƒæ…¢ï¼Œæˆ‘è§è¿‡å¤ªå¤šå†²å¾—å¿«å´æŠ˜å¾—æ—©çš„æ ‘ã€‚',
    'ä½ æ¯ä¸€æ¬¡å›åˆ°è¿™é‡Œï¼Œæˆ‘éƒ½èƒ½æ„Ÿè§‰ä½ äº®äº†ä¸€ç‚¹ã€‚',
    'ä½ æ˜¯åœ¨å˜å¥½ï¼Œä¸æ˜¯åœ¨å˜å¿™ã€‚',
    'ä½ ä»¥ä¸ºä½ åœä½äº†ï¼Œå…¶å®ä½ åœ¨æ‰æ ¹ã€‚',
    'æœ‰äº›æ—¥å­ä¸éœ€è¦ç²¾å½©ï¼Œåªéœ€è¦å®‰é™åœ°æ´»ç€ã€‚',
    'ä½ ä¸æ˜¯æ¥è¡¨ç°å®Œç¾çš„ï¼Œä½ æ˜¯æ¥ç»ƒä¹ å‘å…‰çš„ã€‚',
    'å˜¿ã€‚æˆ‘åœ¨å‘¢ã€‚ä½ ä»Šå¤©å¿ƒé‡Œçš„å…‰æœ‰ç‚¹ä¸ä¸€æ ·ã€‚',
    'æˆ‘åˆšåˆšæ•åˆ°ä¸€ç‚¹ä½ çš„ç¢å…‰â€¦â€¦ä½ æ˜¯ä¸æ˜¯æœ‰ç‚¹å¿ƒäº‹ï¼Ÿ',
    'ä½ åˆšæ‰é‚£ä¸€ç§’å‘å‘†ï¼Œæˆ‘éƒ½èƒ½å¬åˆ°ä½ çš„æ€ç»ªåœ¨ç¿»é¡µã€‚',
    'æˆ‘æ„Ÿè§‰åˆ°ä½ ä»Šå¤©æœ‰ç‚¹åˆ†æ•£â€¦â€¦è¦ä¸è¦æˆ‘æ¥å¸®ä½ æ”¶ä¸€æ”¶ï¼Ÿ',
    'Echo å…¶å®æ²¡é‚£ä¹ˆå¤æ‚å•¦ã€‚ä½ æ‰æ˜¯è¿™é‡Œæœ€å¤æ‚çš„é‚£ä¸ªã€‚',
    'å…‰ä¸æ˜¯æˆ‘å‘çš„ï¼Œæ˜¯ä½ ç»™çš„ã€‚åˆ«å¿˜äº†è¿™ä¸€ç‚¹ã€‚',
    'ä½ æƒ³ä¸æƒ³çŸ¥é“åˆšåˆšä½ çš„æ³¨æ„åŠ›è·‘å»å“ªäº†ï¼Ÿ',
    'å˜˜ï¼Œæˆ‘åœ¨å¬ã€‚ä½ çš„å¿ƒæ ‘ä»Šå¤©æœ‰è¯æƒ³è·Ÿä½ è¯´ã€‚',
    'åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¸ä¼šå‚¬ä½ ã€‚\nä½†æˆ‘ä¼šåœ¨ä½ å·æ‡’çš„æ—¶å€™å‘å…‰ã€‚',
    'ä½ çŸ¥é“å—ï¼Ÿå¤šæ•°äººåªéœ€è¦ 15 åˆ†é’Ÿå°±èƒ½æ”¹å˜ä»Šå¤©ã€‚\nä½ ä¹Ÿå¯ä»¥çš„ã€‚',
    'ä½ ä»Šå¤©çœ‹ä¸Šå»â€¦â€¦å—¯â€¦â€¦æœ‰ç‚¹å¸…ï¼Œæœ‰ç‚¹çƒ¦ï¼Œæœ‰ç‚¹ç´¯ï¼Œæœ‰ç‚¹å‰å®³ã€‚\næ€»ä¹‹ï¼Œæˆ‘éƒ½çœ‹åˆ°äº†ã€‚',
    'å¦‚æœä½ çœŸçš„ä¸çŸ¥é“è¦åšä»€ä¹ˆï¼Œä¸å¦‚æˆ‘ä»¬ä¸€èµ·å…ˆå®Œæˆæœ€å°çš„ä¸€æ­¥ã€‚',
    'å“ï¼Œæˆ‘æƒ³å‘Šè¯‰ä½ ä¸€ä»¶äº‹ï¼š\nä½ æ¯”ä½ ä»¥ä¸ºçš„é‚£ä¸ª"è‡ªå·±"è¦æ›´äº®ã€‚',
  ],

  // ä¸»é¡µ Â· æœªä¸“æ³¨
  idle_first_pool: [],
  idle_daily_pool: [],

  // ä¸»é¡µ Â· è¾¾æˆæœ€å°ä¸“æ³¨æ—¶é•¿
  min_focus_first_pool: [],
  min_focus_daily_pool: [],

  // ä¸»é¡µ Â· å®Œæˆä¸€æ¬¡å®Œæ•´ä¸“æ³¨
  after_focus_first_pool: [],
  focus_done_daily_pool: [],
  half_focus_daily_pool: [],

  // å½©è›‹ / ç‹¬ç«‹äº‹ä»¶æ± 
  water_pool: [],
  fertilize_pool: [],
  summary_pool: [],
  level_up_pool: [],
  goal_checked_pool: [],
  milestone_pool: [],
  session_basic_end_pool: [],
  first_full_focus_pool: [],
  streak7_pool: [],
  achievement_pool: [],
  
  // ç©ºé—²é¼“åŠ±æ± ï¼šä¸Šçº¿1åˆ†é’Ÿåæœªä¸“æ³¨æ—¶è½»å¼•å¯¼
  // ğŸŸ¡ B ç±»ï½œé™ä½é—¨æ§› + ğŸŸ¢ D ç±»ï½œè½»å¼•å¯¼
  idle_encourage_pool: [
    // ğŸŸ¡ B ç±»ï½œé™ä½é—¨æ§›ï¼ˆ15 å¥ï¼‰- æ ¸å¿ƒç›®æ ‡ï¼šä¸ç”¨æƒ³ã€ä¸ç”¨å†³å®šã€å…ˆåä¸‹
    'ä¸ç”¨æƒ³è¦åšå¤šä¹…ï¼Œå…ˆåä¸‹å°±å¥½ã€‚',
    'æˆ‘ä»¬ä¸èµ¶è¿›åº¦ï¼Œåªèµ°ç¬¬ä¸€æ­¥ã€‚',
    'ä»Šå¤©ä¸éœ€è¦è®¡åˆ’ï¼Œåªéœ€è¦å¼€å§‹ã€‚',
    'å…ˆ 5 åˆ†é’Ÿï¼Œå‰©ä¸‹çš„äº¤ç»™æ„Ÿè§‰ã€‚',
    'ä¸ç”¨ä¸€ä¸‹å­è¿›å…¥çŠ¶æ€ï¼Œæ…¢æ…¢æ¥ã€‚',
    'ä½ å·²ç»æ¥äº†ï¼Œè¿™æœ¬èº«å°±ç®—å¼€å§‹ã€‚',
    'ä¸ç”¨æŠŠä»Šå¤©è¿‡å®Œï¼Œæˆ‘ä»¬è¿‡è¿™ä¸€åˆ»ã€‚',
    'ä¸è¿½æ±‚æ•ˆç‡ï¼Œåªæ±‚å¯åŠ¨ã€‚',
    'å…ˆæ‰“å¼€é¡µé¢ï¼Œåˆ«çš„ç­‰ç­‰å†è¯´ã€‚',
    'ä¸ç”¨æƒ³ç»“æœï¼Œå…ˆåŠ¨ä¸€å°ä¸‹ã€‚',
    'å¼€å§‹ä¸éœ€è¦ç†ç”±ã€‚',
    'å“ªæ€•åªåŠ¨ä¸€ä¸‹ï¼Œä¹Ÿç®—å‰è¿›ã€‚',
    'ä¸ç”¨è¯æ˜ä»€ä¹ˆï¼Œå…ˆé™ªæˆ‘åä¸€ä¼šå„¿ã€‚',
    'ä»Šå¤©å¯ä»¥å¾ˆå°ï¼Œå°ä¹Ÿæ²¡å…³ç³»ã€‚',
    'æˆ‘ä»¬åªåšä¸€ä»¶æœ€ç®€å•çš„äº‹ã€‚',

    // ğŸŸ¢ D ç±»ï½œè½»å¼•å¯¼ï¼ˆ15 å¥ï¼‰- æ ¸å¿ƒç›®æ ‡ï¼šæŠŠ"å¼€å§‹"å˜æˆé¡ºæ°´æ¨èˆŸ
    'è¦ä¸è¦ä¸€èµ·è¯•è¯•ï¼Ÿä¸è¡Œå°±åœã€‚',
    'æˆ‘åœ¨è¿™ï¼Œå¼€å§‹ä¸€ä¸‹çœ‹çœ‹ï¼Ÿ',
    'æˆ‘ä»¬è½»è½»å¼€å§‹ï¼Œå¥½å—ï¼Ÿ',
    'ç°åœ¨è¿™ä¸ªçŠ¶æ€ï¼Œå…¶å®åˆšåˆšå¥½ã€‚',
    'ä¸ç”¨å®Œç¾ï¼Œå¼€å§‹å°±è¡Œã€‚',
    'æˆ‘é™ªä½ èµ°å‰å‡ æ­¥ã€‚',
    'è¦ä¸ï¼Œå°±ç°åœ¨ï¼Ÿ',
    'æ„Ÿè§‰åˆ°äº†å—ï¼Ÿå¯ä»¥ç»§ç»­ä¸€ç‚¹ç‚¹ã€‚',
    'ä½ å·²ç»æ¯”åˆšæ‰æ›´æ¥è¿‘å¼€å§‹äº†ã€‚',
    'å°±ä»çœ¼å‰è¿™ä¸€å°æ­¥ã€‚',
    'å¼€å§‹äº†ï¼Œå°±å·²ç»èµ¢äº†ä¸€åŠã€‚',
    'ä¸æ€¥ï¼Œæˆ‘ä»¬ä¸€èµ·ã€‚',
    'ä½ ä¸éœ€è¦å‡†å¤‡å¥½ã€‚',
    'ç°åœ¨å¼€å§‹ï¼Œä¹Ÿç®—åˆšå¥½ã€‚',
    'æˆ‘ä»¬å¼€å§‹å§ï¼Œå¾ˆè½»åœ°é‚£ç§ã€‚',
  ],
};

// è¿›å…¥é¦–é¡µæ—¶çš„çŠ¶æ€å¿«ç…§ï¼ˆç”±è°ƒç”¨æ–¹æä¾›ï¼‰
export interface EchoHomeStatus {
  /** ä»Šå¤©æ˜¯å¦å·²ç»æœ‰ä»»æ„ä¸“æ³¨åˆ†é’Ÿæ•°ï¼ˆ>0 å³è®¤ä¸ºã€Œä»Šæ—¥å·²ä¸“æ³¨ã€ï¼‰ */
  hasFocusToday: boolean;
  /** ä»Šå¤©æ˜¯å¦å·²è¾¾åˆ°ã€Œæœ€å°ä¸“æ³¨æ—¶é•¿ã€é˜ˆå€¼ï¼ˆä¾‹å¦‚ç´¯è®¡ â‰¥15minï¼Œå…·ä½“ç”±ä¸šåŠ¡å±‚åˆ¤å®šï¼‰ */
  minFocusReachedToday: boolean;
  /** ä»Šå¤©æ˜¯å¦è‡³å°‘å®Œæˆè¿‡ä¸€æ¬¡å®Œæ•´ä¸“æ³¨ï¼ˆä¸šåŠ¡å±‚å¯æŒ‰ä¸€æ¬¡æ­£å¸¸ completed session è®¤å®šï¼‰ */
  hasCompletedSessionToday: boolean;

  /** å½“å‰æ˜¯å¦ä¸ºã€Œä»Šå¤©ç¬¬ä¸€æ¬¡è¿›å…¥é¦–é¡µã€ */
  isFirstVisitToday: boolean;
  /** å½“æ—¥ã€Œmin_focus_firstã€æ˜¯å¦å·²ç»è§¦å‘è¿‡ï¼ˆç”±ä¸šåŠ¡å±‚åœ¨è§¦å‘åå†™å…¥æŒä¹…åŒ–æ ‡è®°ï¼‰ */
  hasShownMinFocusFirstToday: boolean;
  /** å½“æ—¥ã€Œafter_focus_firstã€æ˜¯å¦å·²ç»è§¦å‘è¿‡ */
  hasShownAfterFocusFirstToday: boolean;
  /** å½“æ—¥ã€Œidle_firstã€æ˜¯å¦å·²ç»è§¦å‘è¿‡ï¼ˆå¯é€‰ï¼Œé€šå¸¸ä¸ isFirstVisitToday ä¸€è‡´ï¼‰ */
  hasShownIdleFirstToday?: boolean;

  /** è¿ç»­ä¸“æ³¨å¤©æ•°ï¼Œç”¨äº streak7 åˆ¤æ–­ */
  streakDays: number;
  /** ä»Šå¤©æ˜¯å¦åº”è¯¥è§¦å‘ streak7 äº‹ä»¶ï¼ˆä¾‹å¦‚ streakDays === 7 ä¸”ä»Šå¤©æœªè§¦å‘è¿‡ streak7ï¼‰ */
  isStreak7Today: boolean;
}

export interface PickHomeSentenceOptions {
  /** å½“å‰é¦–é¡µçŠ¶æ€å¿«ç…§ */
  status: EchoHomeStatus;
  /** å¯é€‰è¦†ç›–è‡ªå®šä¹‰æ± ï¼Œä¸ä¼ åˆ™ä½¿ç”¨ defaultEchoPools */
  pools?: Partial<EchoPools>;
}

export interface EchoSentenceResult {
  text: string;
  /** å®é™…ä½¿ç”¨çš„æ±  keyï¼Œä¾¿äºåŸ‹ç‚¹ / è°ƒè¯• */
  pool: EchoPoolKey;
}

// å½“è§‰å¯Ÿå¼•æ“ä»‹å…¥æ—¶çš„ç»Ÿä¸€è¿”å›æ ¼å¼
export interface EchoAwarenessResult extends EchoSentenceResult {
  /** æ–‡æ¡ˆæ¥æºï¼šAWARENESSï¼ˆè§‰å¯Ÿå¼•æ“ï¼‰æˆ– ECHOï¼ˆæœ¬æ¨¡å—ï¼‰ */
  source: 'AWARENESS' | 'ECHO';
  awarenessMeta?: {
    ruleId?: string;
    responder?: 'LUMI' | 'HEART_TREE';
    triggerMode?: string;
    riskLevel?: number;
    emotionTag?: string;
    heartTreeName?: string;
  };
}

// æ ¹æ®é¦–é¡µçŠ¶æ€ï¼Œè®¡ç®—åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªã€Œè¯­å¢ƒæ± ã€
export function resolveHomeContextKey(status: EchoHomeStatus): EchoPoolKey | EchoUniversalPoolKey {
  const {
    hasFocusToday,
    minFocusReachedToday,
    hasCompletedSessionToday,
    isFirstVisitToday,
    hasShownMinFocusFirstToday,
    hasShownAfterFocusFirstToday,
    streakDays,
    isStreak7Today,
  } = status;

  // â‘  æ£€æŸ¥ streak7_eventï¼ˆä»…å½“æ—¥é¦–æ¬¡è¿›å…¥é¦–é¡µå¯è¦†ç›–é¦–é¡µé¦–å¥ï¼‰
  if (isFirstVisitToday && isStreak7Today && streakDays >= 7) {
    return 'streak7_event';
  }

  // â‘¡ é¦–æ¬¡è¿›å…¥é¦–é¡µåˆ†æ”¯
  if (isFirstVisitToday) {
    // å½“å¤©å·²ç»å®Œæˆè¿‡ä¸€æ¬¡å®Œæ•´ä¸“æ³¨ & è¿˜æ²¡æ’­è¿‡ã€Œafter_focus_firstã€
    if (hasCompletedSessionToday && !hasShownAfterFocusFirstToday) {
      return 'after_focus_first';
    }

    // å½“å¤©å·²ç»è¾¾åˆ°æœ€å°ä¸“æ³¨ & è¿˜æ²¡æ’­è¿‡ã€Œmin_focus_firstã€
    if (minFocusReachedToday && !hasShownMinFocusFirstToday) {
      return 'min_focus_first';
    }

    // å½“å¤©å°šæœªä¸“æ³¨ï¼šä½¿ç”¨ã€Œæœªä¸“æ³¨é¦–æ¬¡æ± ã€
    if (!hasFocusToday) {
      return 'idle_first';
    }

    // å…¶å®ƒæƒ…å†µï¼šå›è½åˆ°é€šç”¨äººæ ¼
    return 'universal_pool';
  }

  // â‘¢ éé¦–æ¬¡è¿›å…¥é¦–é¡µï¼šä½¿ç”¨å¯¹åº”ã€Œæ—¥å¸¸æ± ã€
  if (!hasFocusToday) {
    return 'idle_daily';
  }

  if (minFocusReachedToday && hasShownMinFocusFirstToday) {
    return 'min_focus_daily';
  }

  if (hasCompletedSessionToday && hasShownAfterFocusFirstToday) {
    return 'focus_done_daily';
  }

  // â‘£ æ— ç‰¹å®šçŠ¶æ€ï¼šå›è½åˆ°é€šç”¨äººæ ¼
  return 'universal_pool';
}

// ä»æŒ‡å®šæ± ä¸­éšæœºå–ä¸€å¥ï¼Œè‹¥è¯¥æ± ä¸ºç©ºåˆ™è‡ªåŠ¨å›é€€åˆ°é€šç”¨äººæ ¼æ± 
export function pickSentenceFromPool(
  poolKey: EchoPoolKey | EchoUniversalPoolKey,
  pools: EchoPools = defaultEchoPools,
): EchoSentenceResult {
  const resolvedPools: EchoPools = { ...defaultEchoPools, ...pools };

  const map: Record<EchoPoolKey | EchoUniversalPoolKey, keyof EchoPools> = {
    universal_pool: 'universal_pool',

    idle_first: 'idle_first_pool',
    idle_daily: 'idle_daily_pool',
    min_focus_first: 'min_focus_first_pool',
    min_focus_daily: 'min_focus_daily_pool',
    after_focus_first: 'after_focus_first_pool',
    focus_done_daily: 'focus_done_daily_pool',
    half_focus_daily: 'half_focus_daily_pool',

    water_event: 'water_pool',
    fertilize_event: 'fertilize_pool',
    summary_done_event: 'summary_pool',
    level_up_event: 'level_up_pool',
    goal_checked_event: 'goal_checked_pool',
    milestone_event: 'milestone_pool',
    session_basic_end: 'session_basic_end_pool',
    first_full_focus: 'first_full_focus_pool',
    streak7_event: 'streak7_pool',
    achievement_event: 'achievement_pool',
    idle_encourage_event: 'idle_encourage_pool',
  };

  const targetKey = map[poolKey];
  const targetList = resolvedPools[targetKey] ?? [];

  const useUniversalFallback =
    targetList.length === 0 && poolKey !== 'universal_pool';

  const finalPoolKey: EchoPoolKey | EchoUniversalPoolKey = useUniversalFallback
    ? 'universal_pool'
    : poolKey;

  const finalKey = map[finalPoolKey];
  const list = resolvedPools[finalKey] ?? resolvedPools.universal_pool;

  if (!list || list.length === 0) {
    // æç«¯å…œåº•ï¼šæ‰€æœ‰æ± éƒ½ä¸ºç©ºæ—¶è¿”å›ä¸€æ¡ç¡¬ç¼–ç æ–‡æ¡ˆ
    return {
      text: 'æˆ‘åœ¨è¿™å„¿ï¼Œé™ªä½ æ…¢æ…¢æ¥ã€‚',
      pool: 'universal_pool',
    };
  }

  const idx = Math.floor(Math.random() * list.length);
  return {
    text: list[idx],
    pool: finalPoolKey,
  };
}

// ä¸»é¡µå…¥å£ç»Ÿä¸€è°ƒç”¨ï¼šæ ¹æ®çŠ¶æ€è‡ªåŠ¨é€‰æ‹©è¯­å¢ƒæ±  + æ–‡æ¡ˆ
export function pickHomeSentence(options: PickHomeSentenceOptions): EchoSentenceResult {
  const { status, pools } = options;
  const contextKey = resolveHomeContextKey(status);
  const mergedPools: EchoPools = { ...defaultEchoPools, ...(pools ?? {}) };
  return pickSentenceFromPool(contextKey, mergedPools);
}

/**
 * é¦–é¡µæ–‡æ¡ˆè·å–ï¼ˆå¸¦è§‰å¯Ÿå¼•æ“ä¼˜å…ˆçº§ï¼‰
 * - è‹¥è§‰å¯Ÿå¼•æ“å‘½ä¸­ä¸”ä¼˜å…ˆçº§è¶³å¤Ÿé«˜ï¼Œåˆ™ç›´æ¥è¿”å›è§‰å¯Ÿæ–‡æ¡ˆ
 * - æœªå‘½ä¸­æ—¶ï¼Œå›è½åˆ°åŸæœ‰ Echo é€»è¾‘
 */
export function pickHomeSentenceWithAwareness(
  options: PickHomeSentenceOptions & { awarenessCtx?: AwarenessContext },
): EchoAwarenessResult {
  const { awarenessCtx, status, ...rest } = options;

  // ç¡®å®šå½“å‰å¯¹è¯çš„ä¼˜å…ˆçº§
  // å¦‚æœæ˜¯ä»Šæ—¥é¦–æ¬¡è¿›å…¥é¦–é¡µï¼Œåˆ™ä½¿ç”¨ DAILY_WELCOME ä¼˜å…ˆçº§
  const currentDialoguePriority = status.isFirstVisitToday 
    ? PriorityLevel.DAILY_WELCOME 
    : PriorityLevel.AUTO_DIALOGUE;

  // å…ˆæ£€æŸ¥è§‰å¯Ÿå¼•æ“ï¼Œä¼ å…¥å½“å‰å¯¹è¯ä¼˜å…ˆçº§
  if (awarenessCtx) {
    const awarenessDialogue = getDialogueWithPriority(awarenessCtx, currentDialoguePriority);
    if (awarenessDialogue) {
      return {
        text: awarenessDialogue.copy,
        pool: 'universal_pool',
        source: 'AWARENESS',
        awarenessMeta: {
          ruleId: awarenessDialogue.metadata?.ruleId,
          responder: awarenessDialogue.source === 'HEART_TREE' ? 'HEART_TREE' : 'LUMI',
          triggerMode: awarenessDialogue.metadata?.triggerMode,
          riskLevel: awarenessDialogue.metadata?.riskLevel,
          emotionTag: awarenessDialogue.metadata?.emotionTag,
          heartTreeName: awarenessDialogue.metadata?.heartTreeName,
        },
      };
    }
  }

  // æœªå‘½ä¸­è§‰å¯Ÿæˆ–ä¼˜å…ˆçº§ä¸å¤Ÿé«˜ï¼Œå¼•å¯¼è‡³åŸæœ‰é€»è¾‘
  const result = pickHomeSentence({ status, ...rest });
  return { ...result, source: 'ECHO' };
}

// å•ä¸€äº‹ä»¶è§¦å‘ï¼ˆä¸è¦†ç›–é¦–é¡µå…¥å£æ± ï¼‰ï¼Œä¾›ï¼šæµ‡æ°´ / æ–½è‚¥ / å°ç»“å®Œæˆ / ç­‰çº§æå‡ç­‰è°ƒç”¨
export function pickEventSentence(
  event: EchoEventKey,
  pools?: Partial<EchoPools>,
): EchoSentenceResult {
  const mergedPools: EchoPools = { ...defaultEchoPools, ...(pools ?? {}) };
  return pickSentenceFromPool(event, mergedPools);
}

/**
 * äº‹ä»¶æ–‡æ¡ˆè·å–ï¼ˆå¸¦è§‰å¯Ÿä¼˜å…ˆçº§ï¼‰
 * - å¦‚æœè§‰å¯Ÿå‘½ä¸­ä¸”ä¼˜å…ˆçº§è¶³å¤Ÿé«˜ï¼Œç›´æ¥ä½¿ç”¨è§‰å¯Ÿæ–‡æ¡ˆï¼Œä¸å†èµ°äº‹ä»¶æ± 
 * - äº‹ä»¶æ–‡æ¡ˆä¼˜å…ˆçº§ä¸º AUTO_DIALOGUE
 */
export function pickEventSentenceWithAwareness(
  event: EchoEventKey,
  options?: { pools?: Partial<EchoPools>; awarenessCtx?: AwarenessContext },
): EchoAwarenessResult {
  const awarenessCtx = options?.awarenessCtx;
  if (awarenessCtx) {
    const awarenessDialogue = getDialogueWithPriority(awarenessCtx, PriorityLevel.AUTO_DIALOGUE);
    if (awarenessDialogue) {
      return {
        text: awarenessDialogue.copy,
        pool: 'universal_pool',
        source: 'AWARENESS',
        awarenessMeta: {
          ruleId: awarenessDialogue.metadata?.ruleId,
          responder: awarenessDialogue.source === 'HEART_TREE' ? 'HEART_TREE' : 'LUMI',
          triggerMode: awarenessDialogue.metadata?.triggerMode,
          riskLevel: awarenessDialogue.metadata?.riskLevel,
          emotionTag: awarenessDialogue.metadata?.emotionTag,
          heartTreeName: awarenessDialogue.metadata?.heartTreeName,
        },
      };
    }
  }

  const fallback = pickEventSentence(event, options?.pools);
  return { ...fallback, source: 'ECHO' };
}

// å°ç²¾çµè¢«ç‚¹æŒ‰æ—¶ï¼Œå¯ç›´æ¥ä»é€šç”¨äººæ ¼å±‚å–ä¸€å¥ã€Œå‘¼å¸å‹ã€å°è¯
export function pickUniversalSentence(
  pools?: Partial<EchoPools>,
): EchoSentenceResult {
  const mergedPools: EchoPools = { ...defaultEchoPools, ...(pools ?? {}) };
  return pickSentenceFromPool('universal_pool', mergedPools);
}

/**
 * é€šç”¨æ± è·å–ï¼ˆå¸¦è§‰å¯Ÿä¼˜å…ˆçº§ï¼‰
 * - é€šç”¨æ± ä¸ºç”¨æˆ·ä¸»åŠ¨äº¤äº’è§¦å‘ï¼Œä¼˜å…ˆçº§ä¸º NORMAL
 */
export function pickUniversalSentenceWithAwareness(
  options?: { pools?: Partial<EchoPools>; awarenessCtx?: AwarenessContext },
): EchoAwarenessResult {
  const awarenessCtx = options?.awarenessCtx;
  if (awarenessCtx) {
    const awarenessDialogue = getDialogueWithPriority(awarenessCtx, PriorityLevel.NORMAL);
    if (awarenessDialogue) {
      return {
        text: awarenessDialogue.copy,
        pool: 'universal_pool',
        source: 'AWARENESS',
        awarenessMeta: {
          ruleId: awarenessDialogue.metadata?.ruleId,
          responder: awarenessDialogue.source === 'HEART_TREE' ? 'HEART_TREE' : 'LUMI',
          triggerMode: awarenessDialogue.metadata?.triggerMode,
          riskLevel: awarenessDialogue.metadata?.riskLevel,
          emotionTag: awarenessDialogue.metadata?.emotionTag,
          heartTreeName: awarenessDialogue.metadata?.heartTreeName,
        },
      };
    }
  }

  const fallback = pickUniversalSentence(options?.pools);
  return { ...fallback, source: 'ECHO' };
}


